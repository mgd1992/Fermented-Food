<nav class="navbar navbar-dark bg-dark p-4 mb-3">
  <div class="container-fluid d-flex justify-content-between align-items-center">
    <%= link_to '/', class: 'nav-link text-light' do %>
      <h1 class="nav-title mb-0">Cool Beans</h1>
    <% end %>

    <% if user_signed_in? %>
      <%= link_to user_path(current_user) do %>
        <%= image_tag current_user.photo, class: "img-fluid rounded-circle profile-avatar"%>
      <% end %>
    <% end %>
  </div>
</nav>


<div class="d-flex flex-column align-items-center sticky-top justify-content-center">

  <div class="d-flex flex-column align-items-center my-3">
    <h1 class="text-center my-2">Todos los fermentos</h1>

    <div class="text-center mb-3">
      <%= link_to '‚ûï Nuevo fermento', new_ferment_path, class: "btn btn-outline-success p-2 rounded-3 w-100" %>
    </div>

    <div class="search-container w-100" >
      <%= form_with(url: ferments_path, method: :get, local: true, class: 'search-form') do %>
        <div class="input-group">
          <%= text_field_tag :query, params[:query], placeholder: "Buscar fermento...", class: 'form-control', autocomplete: "on" %>
          <%= submit_tag 'üîç', class: 'btn btn-outline-none' %>
        </div>
      <% end %>
    </div>

  </div>

  <div class="container mb-5 pb-3">
    <ul class="list-group ">
      <% @ferments.each do |ferment| %>
        <li class="ferment-card ">
          <div class="d-flex flex-column flex-grow-1 p-2">

            <%= link_to ferment_path(ferment), class: "text-decoration-none " do %>
              <h4 class="ferment-name"><%= ferment.name %></h4>
            <% end %>

            <p class="ferment-time">
              <span class="label">Descripci√≥n:</span>
              <%= ferment.description %>
            </p>

            <p class="ferment-text">
              <span class="label">Ingredientes:</span>
              <%= ferment.ingredients %>
            </p>


            <div class="d-flex align-items-center justify-content-around mt-2">
              <p class="ferment-time">
                ‚è≥<%= ferment.fermentation_time %>
              </p>

              <small class="d-block">
                üìÖ <%= ferment.formatted_start_date %>
              </small>

              <% if ferment.user.present? %>
                <small>
                  üë§<%= link_to ferment.user.full_name, profile_path(ferment.user), class: "text-decoration-none text-warning" %>
                </small>
              <% end %>
            </div>

          </div>

          <div class="ferment-actions">

            <%= link_to "Ver", ferment_path(ferment), class: "btn btn-outline-success btn-sm me-2 rounded" %>

            <% if ferment.user == current_user %>
              <%= link_to "üóë", ferment_path(ferment), method: :delete, class: "btn btn-outline-danger btn-sm rounded" %>
            <% end %>

          </div>

        </li>
      <% end %>
    </ul>

  </div>

  <% if @ferments.total_pages > 1 %>
    <div class="pagination rounded">
      <%= paginate @ferments %>
    </div>
  <% end %>

</div>
