<div class="p-4 d-flex justify-content-between align-items-center bg-dark shadow-sm">
  <%= link_to '/', class: 'nav-link text-light d-flex align-items-center gap-2' do %>
    <h1 class="nav-title fs-3 m-0">Cool Beans</h1>
  <% end %>
  <% if @user == current_user %>
    <%= link_to "Sign Out", destroy_user_session_path, data: { turbo_method: :delete }, class: "btn btn-outline-light btn-sm" %>
  <% end %>
</div>

<hr class="text-center w-50 mx-auto mt-4">
<h4 class="text-center text-light mb-2">Mis Fermentos</h4>


<div class="show-page mt-5">
  <!-- Perfil usuario -->
  <div class="profile text-center text-light bg-dark">
    <% if @user.photo.attached? %>
      <%= image_tag @user.photo, class: "img-fluid rounded-circle mb-3", style: "width: 160px; height: 160px; object-fit: cover;" %>
    <% else %>
      <p class="text-light">No hay fotos disponibles!</p>
    <% end %>

    <h3 class="text-light mt-2 mb-1"><%= @user.full_name %></h3>
    <p class="text-light"><%= @user.email %></p>
    <p class="text-warning">Cantidad de fermentos: <strong><%= @user.ferments.count %></strong> </p>
    <div class="text-center mt-4">
      <%= link_to "All Ferments", ferments_path, class:"btn btn-outline-info px-4 py-2 rounded-3" %>
      <%= link_to 'New ferment', new_ferment_path, class: "btn btn-outline-info px-4 py-2 rounded-3" %>
    </div>
    <% if user_signed_in? && @user == current_user %>
      <%= link_to edit_user_path(@user), class: "btn btn-outline-success btn-sm my-2" do %>
        Editar Perfil
      <% end %>
    <% end %>

  </div>

  <!-- Fermentos lista -->
  <div class="ferments-side">
    <% if @user.ferments.any? %>

      <ul class="ferment-list">
        <% @user.ferments.each do |ferment| %>
          <li class="ferment-item">
            <%= link_to ferment_path(ferment), class: "ferment-link" do %>
              <div class="ferment-content">
                <% if ferment.photos.attached? %>
                  <%= image_tag ferment.photos.first.variant(resize_to_limit: [75, 75]), class: "ferment-image" %>
                <% end %>
                <p class="ferment-name"><%= ferment.name %></p>
              </div>
            <% end %>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-muted">No hay fermentos a√∫n.</p>
    <% end %>
  </div>
</div>
