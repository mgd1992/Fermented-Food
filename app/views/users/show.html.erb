<div class="show-page mt-2">

  <div class="profile text-center text-light bg-dark">
    <% if @user.photo.attached? %>
      <%= image_tag @user.photo, class: "img-fluid rounded-circle mb-3", style: "width: 200px; height: 200px; object-fit: cover;" %>
    <% else %>
      <p class="text-light">No hay fotos disponibles!</p>
    <% end %>

    <h3 class="text-light mt-2 mb-1"><%= @user.full_name %></h3>
    <p class="text-light"><%= @user.email %></p>
    <p class="text-warning">Cantidad de fermentos: <strong><%= @user.ferments.count %></strong> </p>
    <div class="text-center">
      <div class="d-flex flex-column justify-content-center">
        <% if user_signed_in? && @user == current_user %>
          <%= link_to 'Crear Fermento', new_ferment_path, class: "btn btn-outline-info px-4 py-2 rounded-3 my-2" %>
          <%= link_to edit_user_path(@user), class: "btn btn-outline-light btn-sm my-2 py-2" do %>
            Editar Perfil
          <% end %>

        <% end %>
      </div>

    </div>

  </div>

  <div class="ferments-side">
    <h4 class="text-center text-light my-4">Mis Fermentos</h4>
    <% if @user.ferments.any? %>
      <div class="ferment-list">
        <% @user.ferments.each do |ferment| %>
          <div class="ferment-item d-flex justify-content-between align-items-center p-3 rounded-3 shadow-sm">
            <%= link_to ferment_path(ferment), class: "d-flex align-items-center text-decoration-none" do %>
              <% if ferment.photos.attached? %>
                <%= image_tag ferment.photos.first.variant(resize_to_limit: [80, 80]), class: "ferment-card-img me-3" %>
              <% end %>
              <div>
                <p class="mb-1 ferment-name"><%= ferment.name %></p>
                <small class="text-light"><%= ferment.formatted_start_date %></small>
              </div>
            <% end %>

            <% if user_signed_in? && ferment.user == current_user %>
              <div class="d-flex gap-2">
                <%= link_to 'âœï¸', edit_ferment_path(ferment), class: "btn btn-sm btn-outline-info" %>
                <%= button_to ferment_path(ferment), method: :delete, data: { confirm: "Â¿Eliminar fermento?" }, class: "btn btn-sm btn-outline-danger" do %>Ã—<% end %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center text-muted my-5">
        <h4>No hay fermentos aÃºn ðŸ«™</h4>
        <p>Crea tu primer fermento!</p>
        <%= link_to 'Crear Fermento', new_ferment_path, class: "btn btn-outline-info px-4 py-2 rounded-3 my-2" %>
      </div>
    <% end %>
  </div>

</div>
