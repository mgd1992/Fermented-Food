<div class="form-page-layout py-5">
  <div class="container" style="max-width: 800px;">

    <div class="f-form-card shadow-lg">
      <div class="card-header bg-dark border-bottom border-secondary border-opacity-25 p-4 d-flex justify-content-between align-items-center">
        <div>
          <h1 class="h4 text-white fw-bold mb-1"><%= @message.subject %></h1>
        </div>
        <%= link_to messages_path, class: "btn-edit-circle" do %>
          <i class="bi bi-x-lg"></i>
        <% end %>
      </div>

      <div class="card-body p-4 p-md-5">
        <div class="d-flex justify-content-between align-items-start mb-4 bg-dark p-3 rounded-4 border border-secondary border-opacity-10">
          <div>
            <p class="mb-1 small">
              <strong class="text-secondary text-uppercase tiny">De:</strong>
              <%= link_to @message.sender.full_name, profile_path(@message.sender), class: "text-warning text-decoration-none fw-bold ms-2" %>
            </p>
            <p class="mb-0 small">
              <strong class="text-secondary text-uppercase tiny">Para:</strong>
              <%= link_to @message.recipient.full_name, profile_path(@message.recipient), class: "text-warning text-decoration-none fw-bold ms-2" %>
            </p>
          </div>
          <div class="text-end text-secondary tiny">
            <%= @message.created_at.strftime("%d %b %Y, %H:%M") %>
          </div>
        </div>

        <div class="message-content text-light-gray fs-5 mb-5 p-2" style="line-height: 1.6;">
          <%= simple_format(@message.content) %>
        </div>

        <div class="d-flex gap-2 justify-content-center border-top border-secondary border-opacity-10 pt-4">
          <% if @message.sender != current_user %>
            <%= link_to new_message_path(recipient_id: @message.sender_id, subject: "Re: #{@message.subject}"),
                class: "btn btn-warning rounded-pill px-4 fw-bold" do %>
              <i class="bi bi-reply-fill me-2"></i> RESPONDER
            <% end %>
          <% end %>

          <%= link_to message_path(@message),
              data: { turbo_method: :delete },
              class: "btn btn-outline-danger rounded-pill px-4 fw-bold" do %>
            <i class="bi bi-trash"></i>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
