<div class="form-page-layout py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">

        <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4 gap-3">
          <div>
            <h2 class="text-white fw-bold mb-1">ðŸ’Œ Mis Mensajes</h2>
            <p class="text-secondary small text-uppercase letter-spacing-1">Gestiona tus conversaciones fermentistas</p>
          </div>

          <div class="d-flex gap-2">
            <%= link_to messages_path(tab: 'received'),
                class: "btn #{ @active_tab == 'received' ? 'btn-warning' : 'btn-outline-secondary opacity-75' } rounded-pill px-3 fw-bold" do %>
              ðŸ“¥ Recibidos
            <% end %>
            <%= link_to messages_path(tab: 'sent'),
                class: "btn #{ @active_tab == 'sent' ? 'btn-warning' : 'btn-outline-secondary opacity-75' } rounded-pill px-3 fw-bold" do %>
              ðŸ“¤ Enviados
            <% end %>
          </div>
        </div>

        <div class="f-form-card shadow-lg overflow-hidden">
          <div class="card-header bg-dark border-bottom border-secondary border-opacity-25 p-3">
            <small class="text-warning fw-bold text-uppercase small">
              <%= @active_tab == 'received' ? "Bandeja de Entrada" : "Mensajes Enviados" %>
            </small>
          </div>

          <div class="card-body p-0">
            <% if @active_tab == 'received' %>
              <%= render "messages/list", messages: @received_messages, type: :received %>
            <% else %>
              <%= render "messages/list", messages: @sent_messages, type: :sent %>
            <% end %>
          </div>
        </div>

        <div class="text-center mt-4">
          <%= link_to user_path(current_user), class: "btn btn-link text-secondary text-decoration-none small fw-bold" do %>
            <i class="bi bi-arrow-left"></i> VOLVER A MI PERFIL
          <% end %>
        </div>

      </div>
    </div>
  </div>
</div>
